<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><title>Morris Jobke</title><link rel=stylesheet href=/css/pygment_trac.css?1666873593><link rel=alternate type=application/atom+xml title="Atom feed" href=/feed.xml><link rel=stylesheet href=/css/webfonts.css?1666873593><link rel=stylesheet href=/css/base.css?1666873593><meta property="og:title" content="ownCloud 9.0 - calendar migration analysis"><meta property="og:description" content="Soon the release of ownCloud 9 is coming. With this release the ownCloud core will provide the CalDAV and CardDAV endpoints that are previously provided by the calendar and contacts app. Therefore a migration was needed. This migration is done automatically during the upgrade and you usually shouldn&rsquo;t need to dig into this. As always: We aim for the best user experience but sometimes things go wrong - so I will here describe how to debug migration issues."><meta property="og:type" content="article"><meta property="og:url" content="https://morrisjobke.de/2016/03/07/ownCloud-9.0-calendar-migration-analysis/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-03-07T15:11:00+00:00"><meta property="article:modified_time" content="2016-03-07T15:11:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="ownCloud 9.0 - calendar migration analysis"><meta name=twitter:description content="Soon the release of ownCloud 9 is coming. With this release the ownCloud core will provide the CalDAV and CardDAV endpoints that are previously provided by the calendar and contacts app. Therefore a migration was needed. This migration is done automatically during the upgrade and you usually shouldn&rsquo;t need to dig into this. As always: We aim for the best user experience but sometimes things go wrong - so I will here describe how to debug migration issues."><meta name=twitter:site content="@MorrisJobke"><meta itemprop=name content="ownCloud 9.0 - calendar migration analysis"><meta itemprop=description content="Soon the release of ownCloud 9 is coming. With this release the ownCloud core will provide the CalDAV and CardDAV endpoints that are previously provided by the calendar and contacts app. Therefore a migration was needed. This migration is done automatically during the upgrade and you usually shouldn&rsquo;t need to dig into this. As always: We aim for the best user experience but sometimes things go wrong - so I will here describe how to debug migration issues."><meta itemprop=datePublished content="2016-03-07T15:11:00+00:00"><meta itemprop=dateModified content="2016-03-07T15:11:00+00:00"><meta itemprop=wordCount content="899"><meta itemprop=keywords content></head><body><div class=header><div class=container><span class=name>Morris<b>Jobke</b></span><ul class=menu><li><a href=/>Articles</a></li>/<li><a href=/emobility>E-mobility</a></li>/<li><a href=/talks>Talks</a></li>/<li><a href=/links>Links</a></li><li class=item-right><a href=/feed.xml><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M576 1344q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm512 123q2 28-17 48-18 21-47 21H889q-25 0-43-16.5t-20-41.5q-22-229-184.5-391.5T250 902q-25-2-41.5-20T192 839V704q0-29 21-47 17-17 43-17h5q160 13 306 80.5T826 902q114 113 181.5 259t80.5 306zm512 2q2 27-18 47-18 20-46 20h-143q-26 0-44.5-17.5T1329 1476q-12-215-101-408.5t-231.5-336-336-231.5T252 398q-25-1-42.5-19.5T192 335V192q0-28 20-46 18-18 44-18h3q262 13 501.5 120T1186 542q187 186 294 425.5t120 501.5z" fill="#fff"/></svg></a></li><li class=item-right><a href=https://twitter.com/MorrisJobke><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z" fill="#fff"/></svg></a></li><li class=item-right><a href=https://github.com/MorrisJobke><svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1664 896q0 251-146.5 451.5T1139 1625q-27 5-39.5-7t-12.5-30v-211q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105T1386 856q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27T578 459.5 492 446q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5T484 1274q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 89t.5 54q0 18-13 30t-40 7q-232-77-378.5-277.5T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z" fill="#fff"/></svg></a></li></ul></div></div><div class=container><h1>ownCloud 9.0 - calendar migration analysis <span class=meta>7 Mar 2016</span></h1><div id=post><p>Soon the release of ownCloud 9 is coming. With this release the ownCloud core will provide the CalDAV and CardDAV endpoints that are previously provided by the calendar and contacts app. Therefore a migration was needed. This migration is done automatically during the upgrade and you usually shouldn&rsquo;t need to dig into this. As always: We aim for the best user experience but sometimes things go wrong - so I will here describe how to debug migration issues.</p><p><strong>Warning:</strong> This should not be executed if you don&rsquo;t know what is done here - don&rsquo;t blindly execute this, because it could lead to data loss if you already changed calendar events after the upgrade to 9.0. The best is to execute this only on a test system.</p><p>This post should cover how one could debug the calendar migration that has failed or was aborted. If your migration worked fine then you don&rsquo;t need to read this. ;)</p><h2 id=checking-if-migration-went-well>Checking if migration went well</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#75715e>/* show old calendars and count */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> o.calendarid, <span style=color:#66d9ef>c</span>.userid, <span style=color:#66d9ef>c</span>.displayname, <span style=color:#66d9ef>c</span>.uri, <span style=color:#66d9ef>COUNT</span>(o.calendarid)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> oc_clndr_objects o
</span></span><span style=display:flex><span><span style=color:#66d9ef>JOIN</span> oc_clndr_calendars <span style=color:#66d9ef>c</span> <span style=color:#66d9ef>ON</span> o.calendarid <span style=color:#f92672>=</span> <span style=color:#66d9ef>c</span>.id
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> calendarid
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>c</span>.userid, <span style=color:#66d9ef>c</span>.displayname;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* show new calendars and count */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> o.calendarid, <span style=color:#66d9ef>c</span>.principaluri, <span style=color:#66d9ef>c</span>.displayname, <span style=color:#66d9ef>c</span>.uri, <span style=color:#66d9ef>COUNT</span>(o.calendarid)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> oc_calendarobjects o
</span></span><span style=display:flex><span><span style=color:#66d9ef>JOIN</span> oc_calendars <span style=color:#66d9ef>c</span> <span style=color:#66d9ef>ON</span> o.calendarid <span style=color:#f92672>=</span> <span style=color:#66d9ef>c</span>.id
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> calendarid
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>c</span>.principaluri, <span style=color:#66d9ef>c</span>.displayname;</span></span></code></pre></div><p>The above two statements will show the old calendars with a count of events in the calendars and the same for the new calendar.</p><p>Ideally this should look like this - the count of the old calendars should be the same as the new ones:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span>MariaDB [owncloud_stable]<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> o.calendarid, <span style=color:#66d9ef>c</span>.userid, <span style=color:#66d9ef>c</span>.displayname, <span style=color:#66d9ef>c</span>.uri, <span style=color:#66d9ef>COUNT</span>(o.calendarid)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span> oc_clndr_objects o
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>JOIN</span> oc_clndr_calendars <span style=color:#66d9ef>c</span> <span style=color:#66d9ef>ON</span> o.calendarid <span style=color:#f92672>=</span> <span style=color:#66d9ef>c</span>.id
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> calendarid
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>c</span>.userid, <span style=color:#66d9ef>c</span>.displayname;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> calendarid <span style=color:#f92672>|</span> userid <span style=color:#f92672>|</span> displayname      <span style=color:#f92672>|</span> uri             <span style=color:#f92672>|</span> <span style=color:#66d9ef>COUNT</span>(o.calendarid) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>8</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Example <span style=color:#ae81ff>1</span>        <span style=color:#f92672>|</span> example1        <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>143</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Feiertage        <span style=color:#f92672>|</span> feiertage       <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>140</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Morris           <span style=color:#f92672>|</span> defaultcalendar <span style=color:#f92672>|</span>                <span style=color:#ae81ff>1019</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>9</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Projekte         <span style=color:#f92672>|</span> projekte        <span style=color:#f92672>|</span>                   <span style=color:#ae81ff>3</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>4</span> <span style=color:#66d9ef>rows</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>MariaDB [owncloud_stable]<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> o.calendarid, <span style=color:#66d9ef>c</span>.principaluri, <span style=color:#66d9ef>c</span>.displayname, <span style=color:#66d9ef>c</span>.uri, <span style=color:#66d9ef>COUNT</span>(o.calendarid)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span> oc_calendarobjects o
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>JOIN</span> oc_calendars <span style=color:#66d9ef>c</span> <span style=color:#66d9ef>ON</span> o.calendarid <span style=color:#f92672>=</span> <span style=color:#66d9ef>c</span>.id
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> calendarid
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>c</span>.principaluri, <span style=color:#66d9ef>c</span>.displayname;
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> calendarid <span style=color:#f92672>|</span> principaluri          <span style=color:#f92672>|</span> displayname      <span style=color:#f92672>|</span> uri             <span style=color:#f92672>|</span> <span style=color:#66d9ef>COUNT</span>(o.calendarid) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Example <span style=color:#ae81ff>1</span>        <span style=color:#f92672>|</span> example1        <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>143</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Feiertage        <span style=color:#f92672>|</span> feiertage       <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>140</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>         <span style=color:#ae81ff>13</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Morris           <span style=color:#f92672>|</span> defaultcalendar <span style=color:#f92672>|</span>                <span style=color:#ae81ff>1019</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>8</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Projekte         <span style=color:#f92672>|</span> projekte        <span style=color:#f92672>|</span>                   <span style=color:#ae81ff>3</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+</span></span></span></code></pre></div><p>If this is the case: Stop reading and be happy that everything worked well. :)</p><p>If the count is not the same it looks like this (the calendar <code>Morris</code> holds 1019 entries in the old table but only 267 in the new table):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> calendarid <span style=color:#f92672>|</span> userid <span style=color:#f92672>|</span> displayname      <span style=color:#f92672>|</span> uri             <span style=color:#f92672>|</span> <span style=color:#66d9ef>COUNT</span>(o.calendarid) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>8</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Example <span style=color:#ae81ff>1</span>        <span style=color:#f92672>|</span> example1        <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>143</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Feiertage        <span style=color:#f92672>|</span> feiertage       <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>140</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Morris           <span style=color:#f92672>|</span> defaultcalendar <span style=color:#f92672>|</span>                <span style=color:#ae81ff>1019</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>9</span> <span style=color:#f92672>|</span> mjob   <span style=color:#f92672>|</span> Projekte         <span style=color:#f92672>|</span> projekte        <span style=color:#f92672>|</span>                   <span style=color:#ae81ff>3</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+--------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#ae81ff>4</span> <span style=color:#66d9ef>rows</span> <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span> calendarid <span style=color:#f92672>|</span> principaluri          <span style=color:#f92672>|</span> displayname      <span style=color:#f92672>|</span> uri             <span style=color:#f92672>|</span> <span style=color:#66d9ef>COUNT</span>(o.calendarid) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>7</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Example <span style=color:#ae81ff>1</span>        <span style=color:#f92672>|</span> example1        <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>143</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>6</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Feiertage        <span style=color:#f92672>|</span> feiertage       <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>140</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>         <span style=color:#ae81ff>13</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Morris           <span style=color:#f92672>|</span> defaultcalendar <span style=color:#f92672>|</span>                 <span style=color:#ae81ff>267</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>8</span> <span style=color:#f92672>|</span> principals<span style=color:#f92672>/</span>users<span style=color:#f92672>/</span>mjob <span style=color:#f92672>|</span> Projekte         <span style=color:#f92672>|</span> projekte        <span style=color:#f92672>|</span>                   <span style=color:#ae81ff>3</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+</span><span style=color:#75715e>------------+-----------------------+------------------+-----------------+---------------------+</span></span></span></code></pre></div><p>This means some events are not migrated and more trouble shooting is required.</p><h2 id=running-the-migration-again>Running the migration again</h2><p>As already written this is usually done automatically during the upgrade of ownCloud 8.2 to 9.0.</p><p>Nevertheless you maybe want to retrigger this. Those commands are only available in debug mode. <strong>Note:</strong> be aware that debug mode should not be used on production instances because it could leak informations in the debug messages once an error occurs. <strong>Edit:</strong> The debug mode is not needed anymore with 9.0.0 RC4. (I added comments to those <code>config:system:set</code> commands)</p><p>The migration steps will only run for not yet migrated calendars. Therefore you need to delete the new calendar that was not fully migrated, because the migration step will check if the calendar only exists. If the calendar exists it will handle it as an already migrated calendar. <strong>Note:</strong> This will delete all data that was added after the upgrade from 8.2 to 9.0 to this calendar. <strong>Only do this if you didn&rsquo;t added any event to this calendar after the upgrade to 9.0!</strong></p><p>Replace <code>USER</code> with your database user, <code>DATABASENAME</code> with the database name of your ownCloud and <code>CALENDARID</code> with the id of the calendar in <code>oc_calendars</code> (new calendar). <code>USERNAME</code> in the migrate command needs to be replaced with the ownCloud username of which the migration step should be run.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#75715e># ./occ config:system:set debug --value true --type boolean</span>
</span></span><span style=display:flex><span>$ mysql -u USER -p DATABASENAME --exec <span style=color:#e6db74>&#34;DELETE FROM oc_calendarobjects WHERE calendarid = CALENDARID; DELETE FROM oc_calendars WHERE id = CALENDARID;&#34;</span>
</span></span><span style=display:flex><span>$ ./occ dav:migrate-calendars USERNAME -v
</span></span><span style=display:flex><span>$ <span style=color:#75715e># ./occ config:system:set debug --value false --type boolean</span></span></span></code></pre></div><p>Then check the logs and the output for error messages and maybe report this to ownCloud.</p></div></div><div class="container footer">Morris Jobke - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International License</a></div></body></html>